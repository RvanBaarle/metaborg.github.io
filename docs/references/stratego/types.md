# Types

[Annotated Terms](../terms/) provide a generic, untyped format to represent tree-structured data.
Stratego transformations can transform such data, but require at least that the arities of term constructors that are used in rules are declared.
Further, starting with Stratego 2, the types of terms and term transformations _may_ be declared _and_ checked in more detail[@SmitsV20].

## Signatures

A signature declares sorts and constructors for these sorts using a definition of the form:

```stratego
signature
  sorts $Sort ...
  constructors
    $Constructor : $Type * ... -> $Type
```

For each constructor, a signature declares the number and types of its arguments.

## Example Signature

For example, the following signature declares some typical constructors for constructing abstract syntax trees of expressions in a programming language:

```
signature
  sorts Id Exp
  constructors
           : String -> Id
    Var    : Id -> Exp
    Int    : Int -> Exp
    Plus   : Exp * Exp -> Exp
    Mul    : Exp * Exp -> Exp
    Call   : Id  * List(Exp) -> Exp
```

The Stratego1 compiler only checks the arity of constructor applications against the signature.
The Stratego2 compiler uses signature definitions to type check term patterns in rules.

## The List Type

The `List(Exp)` type used above is built-in and correspons to homogenous lists of terms of the same type (`Exp` in this case).

## Polymorphic Types

Stratego2 also supports user-defined polymorphic types.

!!! todo
    describe polymorphic types & give example 

## Signature from Syntax Definition

Signatures can be generated automatically from a syntax definition in [SDF3](../../syntax/).
That ensures that the signature describes exactly the abstract syntax terms generated by a parser generated from that syntax definition.
Furthermore, an automatically generated pretty-printer maps terms conforming to such a signature to a well-formed textual representation of the program.

!!! todo
    link to pretty-printer generation

## Transformation Types

Starting with Stratego2, the language also supports the definition of types for transformation definitions.

The general form of a type definition is

```stratego
$Label($StrategyType, ... | $TermType, ...) :: $TermType -> $TermType
```

If

```stratego
$Label($StrategyType, ...) :: $TermType -> $TermType
```


```stratego
$Label :: $TermType -> $TermType
```


## References

\bibliography
